<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DIN EN ISO 286 ‚Äì Limits & Fits Calculator</title>
<style>
  :root{
    --bg:#0b0f14; --panel:#0f1621; --card:#111827; --text:#e5e7eb; --muted:#9ca3af;
    --border:#1f2937; --accent:#60a5fa;
  }
  :root[data-theme="light"]{
    --bg:#f4f6f8; --panel:#ffffff; --card:#ffffff; --text:#1a1a1a; --muted:#5f6b7a; --border:#d9e1ea; --accent:#4a90e2;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;transition:background-color .3s,color .3s}
  header{position:sticky;top:0;background:color-mix(in oklab, var(--bg) 92%, transparent);backdrop-filter:blur(8px);border-bottom:1px solid var(--border);padding:16px 12px}
  .wrap{max-width:1100px;margin:0 auto;padding:16px}
  h1{margin:0 0 6px 0;font-size:20px}
  .sub{margin:0;color:var(--muted);font-size:13px}
  .group{display:flex;gap:8px;align-items:center;background:var(--panel);padding:8px;border:1px solid var(--border);border-radius:12px}
  .lang button,.btn,.pill{padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:var(--card);color:var(--text);cursor:pointer}
  .btn.primary{background:var(--accent);border-color:color-mix(in oklab, var(--accent) 70%, #000 30%);color:#fff}
  main .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;margin:16px 0}
  label{font-size:13px;color:var(--muted)}
  input,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:color-mix(in oklab, var(--bg) 92%, #fff 8%);color:var(--text);transition:background-color .3s,color .3s,border-color .3s}
  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
  .col-3{grid-column:span 3} .col-4{grid-column:span 4} .col-6{grid-column:span 6} .col-12{grid-column:span 12}
  .result{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
  .muted{color:var(--muted)} .hidden{display:none}
  footer{padding:16px 12px;border-top:1px solid var(--border);color:var(--muted)}
  .footer-row{max-width:1100px;margin:0 auto;padding:0 16px;display:flex;gap:16px;align-items:center;justify-content:center;flex-wrap:wrap}
  .theme-chip{display:flex;align-items:center;gap:8px;background:var(--panel);border:1px solid var(--border);color:var(--text);padding:6px 10px;border-radius:999px}
  .theme-btn{cursor:pointer;border:none;background:transparent;font-size:16px;line-height:1}
  .yt-link{display:flex;align-items:center;gap:8px;text-decoration:none;color:var(--text);}
  .yt-icon{width:18px;height:18px;display:inline-block}
  a{color:var(--accent)}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1 data-i18n="title">DIN EN ISO 286 ‚Äì Limits & Fits Calculator</h1>
    <p class="sub" data-i18n="subtitle">Select a fit pair (Hole basis), enter nominal size, and get limits/clearance. Multilingual + theme toggle.</p>
    <div class="group lang">
      <strong class="muted" data-i18n="language">Language</strong>
      <button data-lang="en" class="active">English</button>
      <button data-lang="de">Deutsch</button>
      <button data-lang="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="card">
    <h3 data-i18n="fit_title">Standard Fits (Hole-basis H)</h3>
    <div class="grid">
      <div class="col-3">
        <label data-i18n="nominal_mm">Nominal size (mm)</label>
        <input id="D" type="number" min="0" step="0.001" placeholder="e.g. 50">
      </div>
      <div class="col-3">
        <label data-i18n="hole_grade">Hole grade</label>
        <select id="hole-grade"></select>
      </div>
      <div class="col-3">
        <label data-i18n="shaft_letter">Shaft letter</label>
        <select id="shaft-letter"></select>
      </div>
      <div class="col-3">
        <label data-i18n="shaft_grade">Shaft grade</label>
        <select id="shaft-grade"></select>
      </div>
      <div class="col-12">
        <label data-i18n="preset">Quick presets</label>
        <select id="preset"></select>
      </div>
      <div class="col-12">
        <button id="calc" class="btn primary" data-i18n="calculate">Calculate</button>
      </div>
    </div>
    <div id="out" class="result hidden"></div>
    <p class="muted" data-i18n="note">
      Notes: IT tolerances computed via ISO 286 i-unit. Fundamental deviations embedded for H/h and practical approximations for g/f (hole-basis). For exact corporate values, we can extend the table.
    </p>
  </div>
</main>

<footer>
  <div class="footer-row">
    <span class="theme-chip">
      <button id="theme-toggle" class="theme-btn" aria-label="Toggle theme">‚òÄÔ∏è/üåô</button>
      <span id="theme-status">Dark mode</span>
    </span>
    <span>|</span>
    <span class="dev">Developed by Engineer Zaher Taleb</span>
    <span>|</span>
    <a class="yt-link" href="https://www.youtube.com/@Zaher.Taleb.mechanical.design" target="_blank" rel="noopener">
      <svg class="yt-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path fill="#FF0000" d="M23.5 6.2s-.2-1.6-.8-2.3c-.8-.8-1.6-.8-2-0.9C17.6 2.5 12 2.5 12 2.5h0s-5.6 0-8.7.4c-.5.1-1.2.1-2 .9C.7 4.6.5 6.2.5 6.2S0 8.1 0 10v1.9c0 1.9.5 3.8.5 3.8s.2 1.6.8 2.3c.8.8 1.8.8 2.3.9 1.7.2 7.4.4 8.4.4h.1c1 0 6.7-.1 8.4-.4.5-.1 1.5-.1 2.3-.9.6-.6.8-2.3.8-2.3s.5-1.9.5-3.8V10c0-1.9-.5-3.8-.5-3.8z"/>
        <path fill="#fff" d="M9.8 15.3V7.9l6.4 3.7-6.4 3.7z"/>
      </svg>
      <span>YouTube Channel</span>
    </a>
  </div>
</footer>

<script>
// I18N
const I18N = {
  en: { title:"DIN EN ISO 286 ‚Äì Limits & Fits Calculator", subtitle:"Select a fit pair (Hole basis), enter nominal size, and get limits/clearance.",
        language:"Language", calculate:"Calculate", fit_title:"Standard Fits (Hole-basis H)",
        nominal_mm:"Nominal size (mm)", hole_grade:"Hole grade", shaft_letter:"Shaft letter", shaft_grade:"Shaft grade",
        preset:"Quick presets", note:"Notes: IT via i-unit; embedded deviations for H/h and approximations for g/f."},
  de: { title:"DIN EN ISO 286 ‚Äì Passungsrechner", subtitle:"Passung (Bohrungsgrundlage) w√§hlen, Nennma√ü eingeben und Grenzma√üe/Spiel berechnen.",
        language:"Sprache", calculate:"Berechnen", fit_title:"Standardpassungen (Bohrung H)",
        nominal_mm:"Nennma√ü (mm)", hole_grade:"Bohrungs-Grad", shaft_letter:"Wellen-Buchstabe", shaft_grade:"Wellen-Grad",
        preset:"Schnellauswahl", note:"Hinweis: IT √ºber i‚ÄëEinheit; eingebaute Abweichungen f√ºr H/h und N√§herungen f√ºr g/f."},
  ar: { title:"DIN EN ISO 286 ‚Äì ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ÿ±ÿßÿ≤ÿÆ", subtitle:"ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑÿ®ÿ±ÿ≤ÿÆ (ÿ£ÿ≥ÿßÿ≥ ÿßŸÑÿ´ŸÇÿ® H)ÿå ÿ£ÿØÿÆŸÑ ÿßŸÑŸÖŸÇÿßÿ≥ ÿßŸÑÿßÿ≥ŸÖŸä ŸÑÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ ÿßŸÑÿ≠ÿØŸàÿØ/ÿßŸÑÿÆŸÑŸàÿµ.",
        language:"ÿßŸÑŸÑÿ∫ÿ©", calculate:"ÿßÿ≠ÿ≥ÿ®", fit_title:"ÿ®ÿ±ÿßÿ≤ÿÆ ŸÇŸäÿßÿ≥Ÿäÿ© (ÿ£ÿ≥ÿßÿ≥ ÿßŸÑÿ´ŸÇÿ® H)",
        nominal_mm:"ÿßŸÑŸÖŸÇÿßÿ≥ ÿßŸÑÿßÿ≥ŸÖŸä (ŸÖŸÖ)", hole_grade:"ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ´ŸÇÿ®", shaft_letter:"ÿ≠ÿ±ŸÅ ÿßŸÑÿπŸÖŸàÿØ", shaft_grade:"ÿØÿ±ÿ¨ÿ© ÿßŸÑÿπŸÖŸàÿØ",
        preset:"ÿßÿÆÿ™Ÿäÿßÿ±ÿßÿ™ ÿ≥ÿ±Ÿäÿπÿ©", note:"ŸÖŸÑÿßÿ≠ÿ∏ÿ©: IT ÿ®ÿµŸäÿ∫ÿ© i-unitÿõ ÿßŸÜÿ≠ÿ±ÿßŸÅÿßÿ™ ŸÖÿØŸÖÿ¨ÿ© ŸÑŸÄ H/h Ÿàÿ™ŸÇÿ±Ÿäÿ®ŸäŸãÿß ŸÑŸÄ g/f."}
};

// Theme
const THEME_KEY="iso286_theme2";
function applyTheme(t){ document.documentElement.dataset.theme=t; localStorage.setItem(THEME_KEY,t); updateThemeStatus(); }
function updateThemeStatus(){
  const st=document.getElementById('theme-status');
  const lang = document.documentElement.lang || 'en';
  const isLight = document.documentElement.dataset.theme==='light';
  const text = {en:isLight?'Light mode':'Dark mode', de:isLight?'Helles Thema':'Dunkles Thema', ar:isLight?'ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÅÿßÿ™ÿ≠':'ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿØÿßŸÉŸÜ'}[lang];
  st.textContent = text;
}
document.getElementById('theme-toggle').addEventListener('click', ()=>{
  const cur = document.documentElement.dataset.theme==='light'?'light':'dark';
  applyTheme(cur==='light'?'dark':'light');
});
(function initTheme(){
  const saved = localStorage.getItem(THEME_KEY);
  applyTheme(saved==='light'?'light':'dark');
})();

// Language
function applyLang(code){
  document.documentElement.lang=code;
  document.body.classList.toggle('rtl', code==='ar');
  document.querySelectorAll("[data-i18n]").forEach(el=>{ const k=el.dataset.i18n; if(I18N[code][k]) el.textContent = I18N[code][k]; });
  updateThemeStatus();
}
document.querySelectorAll(".lang button").forEach(b=>b.addEventListener('click', ()=>{
  document.querySelectorAll(".lang button").forEach(x=>x.classList.remove('active')); b.classList.add('active'); applyLang(b.dataset.lang);
}));
applyLang('en');

// ISO 286 core ‚Äî IT tolerance
const IT_MULT = { IT5:7, IT6:10, IT7:16, IT8:25, IT9:40, IT10:64, IT11:100, IT12:160, IT13:250, IT14:400, IT15:640, IT16:1000 };
function i_unit(D){ return 0.45*Math.cbrt(D) + 0.001*D; } // ¬µm
function itTol(D, grade){ const m = IT_MULT[grade]; return (m ? (m * i_unit(D))/1000 : NaN); } // mm

// Fundamental deviations (hole-basis selections)
// - Hole H: EI = 0; ES = IT_hole
// - Shaft h: es = 0; ei = -IT_shaft
// - Shaft g,f: practical negative offsets relative to D (in ¬µm); values then combined with IT grade.
//   These approximations are commonly used; for exact corporate tables, replace these functions.
function shaft_g_es_um(D){ return -2.5 * Math.pow(D, 0.34); } // es < 0
function shaft_f_es_um(D){ return -5.5 * Math.pow(D, 0.41); } // more negative than g

function holeDeviation(letter, IT_h){ // mm
  if (letter==='H') return { EI: 0, ES: IT_h };
  return null;
}
function shaftDeviation(letter, IT_s, D){ // mm
  if (letter==='h') return { es: 0, ei: -IT_s };
  if (letter==='g') { const es = shaft_g_es_um(D)/1000; return { es: es, ei: es - IT_s }; }
  if (letter==='f') { const es = shaft_f_es_um(D)/1000; return { es: es, ei: es - IT_s }; }
  // centered js (optional):
  // if (letter==='js') return { es: IT_s/2, ei: -IT_s/2 };
  return null;
}

// UI lists
const HOLE_GRADES = ["IT5","IT6","IT7","IT8","IT9","IT10","IT11","IT12","IT13","IT14","IT15","IT16"];
const SHAFT_LETTERS = ["h","g","f"]; // extendable
const SHAFT_GRADES = HOLE_GRADES;

// Presets
const PRESETS = [
  {label:"H7/h6 (close running)", holeGrade:"IT7", shaftLetter:"h", shaftGrade:"IT6"},
  {label:"H7/g6 (sliding fit)",   holeGrade:"IT7", shaftLetter:"g", shaftGrade:"IT6"},
  {label:"H8/f7 (clearance fit)", holeGrade:"IT8", shaftLetter:"f", shaftGrade:"IT7"},
  {label:"H8/h7 (general)",       holeGrade:"IT8", shaftLetter:"h", shaftGrade:"IT7"}
];

function fillSelect(id, arr, labels){
  const el = document.getElementById(id);
  el.innerHTML = "";
  arr.forEach(v=>{
    const opt = document.createElement('option');
    opt.value = v; opt.textContent = labels ? labels(v) : v;
    el.appendChild(opt);
  });
}

fillSelect('hole-grade', HOLE_GRADES);
fillSelect('shaft-letter', SHAFT_LETTERS, v=>v);
fillSelect('shaft-grade', SHAFT_GRADES);
(function fillPresets(){
  const el = document.getElementById('preset');
  PRESETS.forEach(p=>{
    const opt = document.createElement('option');
    opt.value = JSON.stringify(p);
    opt.textContent = p.label;
    el.appendChild(opt);
  });
  el.addEventListener('change', ()=>{
    const p = JSON.parse(el.value);
    document.getElementById('hole-grade').value = p.holeGrade;
    document.getElementById('shaft-letter').value = p.shaftLetter;
    document.getElementById('shaft-grade').value = p.shaftGrade;
  });
})();

function mm(x){ return Math.round(x*1000)/1000; }

function showResult(items){
  const out = document.getElementById('out');
  out.innerHTML = "";
  items.forEach(it=>{
    const card = document.createElement('div'); card.className="card";
    const h = document.createElement('div'); h.className="muted"; h.textContent = it.label;
    const v = document.createElement('div'); v.style.fontSize="20px"; v.style.fontWeight="700"; v.textContent = it.value;
    card.appendChild(h); card.appendChild(v); out.appendChild(card);
  });
  out.classList.remove('hidden');
}

document.getElementById('calc').addEventListener('click', ()=>{
  const D = parseFloat(document.getElementById('D').value);
  const holeGrade = document.getElementById('hole-grade').value;
  const shaftLetter = document.getElementById('shaft-letter').value;
  const shaftGrade = document.getElementById('shaft-grade').value;

  const IT_h = itTol(D, holeGrade);
  const IT_s = itTol(D, shaftGrade);

  const holeDev = holeDeviation('H', IT_h);
  const shaftDev = shaftDeviation(shaftLetter, IT_s, D);

  if(!isFinite(D) || !holeDev || !shaftDev){ alert("Please enter D and select valid fit options."); return; }

  const hole_upper = D + (holeDev.ES ?? 0);
  const hole_lower = D + (holeDev.EI ?? 0);
  const shaft_upper = D + (shaftDev.es ?? 0);
  const shaft_lower = D + (shaftDev.ei ?? 0);

  const max_clear = hole_upper - shaft_lower;
  const min_clear = hole_lower - shaft_upper;

  showResult([
    {label:"Hole upper ES (mm)", value: mm(hole_upper)},
    {label:"Hole lower EI (mm)", value: mm(hole_lower)},
    {label:"Shaft upper es (mm)", value: mm(shaft_upper)},
    {label:"Shaft lower ei (mm)", value: mm(shaft_lower)},
    {label:"Max clearance (mm)", value: mm(max_clear)},
    {label:"Min clearance (mm)", value: mm(min_clear)}
  ]);
});
</script>
</body>
</html>
